<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/x-icon" href="../../../static/favicon.ico?h=e38ef9dd">
<link rel="stylesheet" href="../../../static/lib/normalize.css?h=ece571f3">
<link rel="stylesheet" href="../../../static/lib/skeleton.css?h=1fd77917">
<link rel="stylesheet" href="../../../static/style.css?h=5db9e889">
<link rel="stylesheet" href="../../../static/lib/medium-editor/medium-editor.min.css?h=17e98ac9">
<link rel="stylesheet" href="../../../static/fonts/anonymous-pro/anonymous-pro.css?h=7b3d4039">
<link rel="stylesheet" href="../../../static/fonts/fa/css/font-awesome.min.css?h=512c7d79">
<link rel="stylesheet" href="../../../static/fonts/ionicons/css/ionicons.min.css?h=f0459300">
<link rel="stylesheet" href="../../../static/fonts/source-sans-pro/source-sans-pro.css?h=eef2e813">

<!-- <script src="../../../static/lib/clipboard.min.js?h=64efc85d"></script> -->
<script src="../../../static/lib/jquery-2.2.1.min.js?h=7cb05e3d"></script>
<script src="../../../static/lib/marked.js?h=acaa528b"></script>
<script src="../../../static/lib/MooTools-Core-1.6.0.js?h=f829fe22"></script>
<script src="../../../static/lib/sprintf.js?h=f8d59971"></script>
<script src="../../../static/lib/medium-editor/medium-editor.min.js?h=d2c3e1bb"></script>
<script src="../../../static/lib/me-markdown.standalone.min.js?h=f8bd91a7"></script>
<script src="../../../static/lr-notebook.js?h=9fb07e66"></script>


<title></title>
<body>
  <header>
    <h1><i class="fa fa-sticky-note-o"></i> nb-fischbach</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a  href="../../../">Welcome</a></li>
        
          <li><a  class="active" href="../../../projects/">Projects</a></li>
        
          <li><a  href="../../../calendar/">Calendar</a></li>
        
          <li><a  href="../../../meetings/">Meetings</a></li>
        
          <li><a  href="../../../about/">About</a></li>
        
          <li><a  href="../../../shared/">Shared</a></li>
        
      </ul>
    </nav>
    
  </header>

  <iframe width="0" height="0" border="0" name="frame" style="border-style: none;"></iframe>

  <div class="page">
    
<h2 style="display: inline;"><a class="orange" href="../../../projects/HSV/">HSV/</a></h2><br>
<form target="frame" action="/admin/api/browsefs" method="post">
  <input type="hidden" name="path" value="/projects/HSV/2017-05-16">
  <input type="image" src=../../../static/images/link.png>
</form>
<h2 class="lightblue" style="display: inline;">Data Fetching and Organization</h2> <span style="float:right;" class="midgray">2017-05-16</span> 
<hr>


<h5 style="float:left;">Attachments:</h5>


<div class="row">
  <div class="one column"></div>
  <div class="two columns"><!-- Attachments: --></div>
<div class="nine columns">
    
    
    
        <a class="green" href="../../../projects/HSV/2017-05-16/1_gb_to_fasta.sh">1_gb_to_fasta.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-16/2_adjust_fasta.sh">2_adjust_fasta.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-16/5-16-17 - Gene Expression.md">5-16-17 - Gene Expression.md</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-16/example.txt">example.txt</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-16/gb_to_fasta.sh">gb_to_fasta.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-16/genbank_to_fasta.py">genbank_to_fasta.py</a>
        
  
  
  
  
  
  
  
  
  
  
  
  <i aria-hidden="true" class="icon ion-social-python"></i>
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-16/README.txt">README.txt</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  

    
  </div>
</div>


<hr>





<div id="entry">
    <h2>HSV-2017-05-16</h2>
<p>Currently able to grab uniprot xml data for a single protein ID. Can store it as a dict. Need to grab data for all protein IDs and find a good way to store them.</p>
<h3>Stripping Data</h3>
<p>I've stripped down the xml data as best I can so far. The problem is that different entries have different depths. I've unfurled the annotations dictionary so that the different annotations get their own top-level entries in the resulting record_dict for each protein record but I'm going to move on instead of trying to unfurl even further.</p>
<h3>Scraping all IDs</h3>
<p>I need to get the list of all protein IDs from somewhere so that I can call the record_dict function on each one. I think I may have just copy-pasted a protein ID directly from the bokeh html graph. Looks like the only other function in the file currently is an aux function that's being used to create the record_dict for each protein ID. So I'm going to have to grab all the protein IDs from somewhere. Where did they come from originally?</p>
<h3>Organizing HSV directory</h3>
<p>I think I need to reorganize the HSV directory so that I know where everything is. I'm going to keep everything under the HSV top-folder and take it from there. I think the existing file-structure is based on the assumption that the whole dropbox-fischbach directory was going to be turned into a website which is not the case.</p>
<p>So created a data folder in HSV. I'm going to move the data fetching script there and eventually the Bokeh files. But I also want to consolidate the core .gb and .fasta files in there.</p>
<p>Moved most of the gb and fasta files into the new folder, and probably have disrupted the Bokeh workflow (definitely have disrupted the orthomcl workflow). Going to have to revisit when I try to add orthomcl slider functionality into the bokeh front-end.</p>
<p>On second thought, better to get orthomcl up and running in the new data folder, that way I know what's available in the data folder for scraping.</p>
<h3>Moving orthomcl dir to HSV/data</h3>
<p>Copied over orthomcl.config.template over to HSV/data. Don't think I need to reinstall schema.</p>
<p>I've written a shell script called gb_to_fasta.sh that calls the python script in genbank_to_fasta_1.1. Goes into folder HHV_gb and converts everything to fasta and spits out resulting file into HHV_fasta.</p>
<p>Now working on calling orthomclAdjustFasta. Writing another shell script (2_adjust_fasta.sh) that calls orthomclAdjustFasta. Does so for every fasta file in HHV_fasta and moves the compliant version to HHV_compliant with name according to whatever name is given in the original fasta file (and original .gb file) before the first "_" character.</p>
<p>Script 3 (3_filter_fasta.sh) filters the compliant fasta file. Uses the default suggested filtering values (10 minimum sequence length and 20 maximum percent stop codons) but these values can be adjusted by changing the variables in the script 3_filter_fasta.sh.</p>
<p>Also have this script dumping the resulting goodProteins and poorProteins files into a folder called orthomcl_files so that they are not sitting in the top-level directory.</p>
<h4>Running BLAST on goodProteins.fasta</h4>
<p>Need shell scripts to run BLAST on goodProteins.fasta. I think I can tinker with the parameters here.</p>

</div>






<pre style="display:none;" class="markdown"></pre>

<script>
  function renderRightAsMarkdown() {
      var right = document.getElementsByClassName("right");
      for (var i=0; i<right.length; i++) {
          src = right[i].innerHTML
          right[i].innerHTML = marked(src);
      }
  }
  renderRightAsMarkdown();
</script>




<script>

// Disable clipboard stuff for now
// var pre = document.getElementsByTagName('pre');
// for (var i = 0; i < pre.length; i++) {
//   var button = document.createElement('button');
//   button.className = 'btn fa fa-copy';
//   pre[i].appendChild(button);
// }

// var clipboard = new Clipboard('.btn', {
//   target: function(trigger) {return trigger.previousElementSibling;}
// });

// function showSuccess(elem){elem.setAttribute('class','btn fa fa-check');}
// function sleep (time) {return new Promise((resolve) => setTimeout(resolve, time));}
// clipboard.on('success',function(e){
//   showSuccess(e.trigger);
//   sleep(350).then(() => {e.clearSelection();
//     e.trigger.setAttribute('class','btn fa fa-copy');})
// });

// Experimental direct editing

// var paragraphs = $$("#entry>p");
// var lastEl = paragraphs.getLast();
// var path = '/projects/HSV/2017-05-16';

// paragraphs.each(function(el) {
//   var dropArea = new Element('div', {'class':'right droparea',
//                                      'ondrop':'drop(event, path)',
//                                      'ondragover':'dragover_handler(event)'
//                                      });
//   var next = el.getNext();
//   if (!!next && !next.hasClass('right')) {
//     droptext = new Element('div', {'id':'targetString',
//                                    styles:{display: 'none'},
//                                    'html':el.get('html')
//                                   });
//     droptext.inject(dropArea);
//     dropArea.inject(el, 'after');
//   }
// });

// var rightimgs = $$("img.thumb");
// rightimgs.each(function(el) {
//   var button = document.createElement('button');
//   button.className = 'btn fa fa-window-close';
//   el.appendChild(button);
// });

// var markDownEl = document.querySelector(".markdown");

// new MediumEditor($$("#entry>p"), {
//     extensions: {markdown: new MeMarkdown(function (md) {markDownEl.textContent = md;})},
//     toolbar: {
//       allowMultiParagraphSelection: false,
//       buttons: ['bold', 'italic', 'underline']
//     },
//     disableReturn: true,
//     disableDoubleReturn: true,
//     disableExtraSpaces: true,
//     paste: {
//         forcePlainText: true,
//         cleanPastedHTML: true
//     }
// });

</script>

<a href="slides" id="play-slides-link"><i class="fa fa-play" aria-hidden="true"></i></a>


  </div>

  <footer>
    &copy; 2016. Made with <a target="_new" href="http://bionano.ucsf.edu/"><i class="fa fa-gears"></i></a> in SF.
  </footer>

</body>
