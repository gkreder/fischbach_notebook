<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title></title>
    <link rel="stylesheet" href="../../../../static/fonts/fa/css/font-awesome.min.css?h=512c7d79">
    <link rel="stylesheet" href="/static/lib/reveal/css/reveal.css">
    <link rel="stylesheet" href="/static/lib/reveal/css/theme/white.css" id="theme">
    <link rel="stylesheet" href="/static/slides.css">
    <style>#lektor-edit-link {display:none;}</style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
      
      <section data-markdown data-separator="^\n\n">
        
## CAS 5-19-17



I&#39;ve gotten the block and hits objects written as well as the pfam object. I&#39;ve spat out the Cas9_REC data and now need to move into the Arrower code and port in the blocks.out file. 

Writing this down, it seems like maybe I don&#39;t have to go into the arrower code and that might take a little bit of time. I think instead, what I can do is maybe make a heatmap type thing?

More of a grid that would look something like this:


pfam_term | pfam_term | HIT TERM | pfam_term | ... |
-------- | ------| ---- | -----| -----| ----- |
pfam_term | pfam_term | HIT TERM | pfam_term | ...
pfam_term | pfam_term | HIT TERM | pfam_term | ...
pfam_term | pfam_term | HIT TERM | pfam_term | ...
pfam_term | pfam_term | HIT TERM | pfam_term | ...


The adjacent pfam terms can be colored and sorted for visualization 


Would this make sense to do with Bokeh? I already have something of a heatmap code up and running and could make some sense to use it...

If I can integrate the generated Bokeh html into the lektor notebook then it might be worth it. 

Adding Tab to Lektor Notebook
-----

If I just add a folder in the content directory of the lektor notebook, nothing seems to get added. If I go into the templates folder, I think it&#39;s because I need to add something to the actual layout .html file. 

I&#39;ve created a backup copy of the layout.html file and modified the existing one. I&#39;ve added a tab called data that should link to ./content/data in the notebook file structure. 

I copied over the contents.lr file from the projects page to the data folder and it looks to be fine in terms of the linking. The content.lr file is just linking to the projects model. So I think I may just have to create a new type of model for this page and link it to the Bokeh html file. 

Just changed the new tab name to &#39;results&#39;


I&#39;m creating a new model called &#39;results.ini&#39; (copied the projects.ini file and renamed it). I&#39;m giving it a child model like the projects.ini model has the project.ini child. Calling it result.ini

I&#39;ve also created corresponding results.html and result.html files. 
I&#39;m updated the results.html file but not seing updates on the rendered results page. I&#39;m going to put this down for now and come back to it when I have more data to be putting in there anyways.

Heatmap data (heatmap.py)
-----

Back to the visualization. I&#39;m making a new scipt called heatmap.py that will render a grid/heatmap as described above. 

I have pfam terms now concatenated into a single numpy array with dimensions (162, 51). I need to have a color mapping now. I think the way to do it is to count the number of unique pfam terms in the concatenated array and assign each one a unique int (do I need this or can I just straight to assigning each one a unique color?). I&#39;ll try assigning each one a unique integer first and spitting out a heatmap. 

This works fine, but the heatmap is pretty unreadable (first_pass.png).


Jakub suggested just coloring in the &#39;priveleged&#39; cas terms. e.g. cas1/2 and the nuclease terms. The rest of the random sort of colors aren&#39;t that important. 

Coloring Key Terms
-----

I think the best way to do that will be to associate &#39;priveleged&#39; terms with each target pfam as a separate txt file in the data folder as blocks.out. 

I&#39;m creating a file in the data directory just called &#39;key_terms&#39;. Each line in this file is going to be a pfam term (can be easily edited) and every pfam term in this file will get its own color. Otherwise, no colors for the rest of the terms. 

It sounds like I&#39;ll have to do a little bit of data processing so I think that it makes sense to make a separate data processing script. I&#39;m calling it data_prep.py. Going to copy over most of the heatmap code I have so far, minus the plotting part. 

I need to define a custom colormap for this data. But looking over it...I&#39;m starting to think that it actually might just be easier to repurpose the Bokeh code that I have setup for HSV heatmap. It&#39;s pretty hard to be directly mapping colors to values like I want and I know that I can do that in maybe a more straightfoward way using Bokeh. 

I just tried to run HSV_Bokeh.py and it is no longer finding data_sourc.pkl. I started rearranging the HSV file structure but didn&#39;t finish doing that. I think it&#39;s worth it to take a little bit of time to finish that out to the point where HSV_bokeh is working again. And that way I can take a look at the HSV_Bokeh source code too.
      </section>
      
      </div>
    </div>

    <script src="../../../../static/lib/reveal/lib/js/head.min.js?h=8c9495c7"></script>
    <script src="../../../../static/lib/reveal/js/reveal.js?h=19c4134c"></script>
    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        center: false,
        history: true,
        margin: 0.2,
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        transitionSpeed: 'fast', // default/fast/slow

        menu: {
            // Specifies which side of the presentation the menu will
            // be shown. Use 'left' or 'right'.
            side: 'left',

            // Add slide numbers to the titles in the slide list.
            // Use 'true' or format string (same as reveal.js slide numbers)
            numbers: false,

            // Specifies which slide elements will be used for generating
            // the slide titles in the menu. The default selects the first
            // heading element found in the slide, but you can specify any
            // valid css selector and the text from the first matching
            // element will be used.
            // Note: that a section data-menu-title attribute or an element
            // with a menu-title class will take precedence over this option
            titleSelector: 'h1, h2, h3, h4, h5, h6',

            // Hide slides from the menu that do not have a title.
            // Set to 'true' to only list slides with titles.
            hideMissingTitles: false,

            // Add markers to the slide titles to indicate the
            // progress through the presentation
            markers: true,

            // Specify custom panels to be included in the menu, by
            // providing an array of objects with 'title', 'icon'
            // properties, and either a 'src' or 'content' property.
            custom: false,

            // Specifies the themes that will be available in the themes
            // menu panel. Set to 'false' to hide themes panel.
            themes: [
                { name: 'Black', theme: '/static/lib/reveal/css/theme/black.css' },
                { name: 'White', theme: '/static/lib/reveal/css/theme/white.css' },
                { name: 'League', theme: '/static/lib/reveal/css/theme/league.css' },
                { name: 'Sky', theme: '/static/lib/reveal/css/theme/sky.css' },
                { name: 'Solarized', theme: '/static/lib/reveal/css/theme/solarized.css' }
            ],

            // Specifies if the transitions menu panel will be shown.
            transitions: true,

            // Adds a menu button to the slides to open the menu panel.
            // Set to 'false' to hide the button.
            openButton: true,

            // If 'true' allows the slide number in the presentation to
            // open the menu panel. The reveal.js slideNumber option must
            // be displayed for this to take effect
            openSlideNumber: false,

            // If true allows the user to open and navigate the menu using
            // the keyboard. Standard keyboard interaction with reveal
            // will be disabled while the menu is open.
            keyboard: true
        },

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          { src: "../../../../static/lib/reveal/plugin/markdown/marked.js" },
          { src: "../../../../static/lib/reveal/plugin/markdown/markdown.js" },
          { src: "../../../../static/lib/reveal/plugin/menu/menu.js"},
          { src: "../../../../static/lib/reveal/plugin/zoom-js/zoom.js", async: true },
          { src: "../../../../static/lib/reveal/plugin/notes/notes.js", async: true },
          { src: "../../../../static/lib/reveal/plugin/highlight/highlight.js", async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>

    <a href=".." id="exit-slides-link"><i class="fa fa-close" aria-hidden="true"></i></a>
  </body>
</html>
