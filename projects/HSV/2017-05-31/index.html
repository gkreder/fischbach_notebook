<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/x-icon" href="../../../static/favicon.ico?h=e38ef9dd">
<link rel="stylesheet" href="../../../static/lib/normalize.css?h=ece571f3">
<link rel="stylesheet" href="../../../static/lib/skeleton.css?h=1fd77917">
<link rel="stylesheet" href="../../../static/style.css?h=5db9e889">
<link rel="stylesheet" href="../../../static/lib/medium-editor/medium-editor.min.css?h=17e98ac9">
<link rel="stylesheet" href="../../../static/fonts/anonymous-pro/anonymous-pro.css?h=7b3d4039">
<link rel="stylesheet" href="../../../static/fonts/fa/css/font-awesome.min.css?h=512c7d79">
<link rel="stylesheet" href="../../../static/fonts/ionicons/css/ionicons.min.css?h=f0459300">
<link rel="stylesheet" href="../../../static/fonts/source-sans-pro/source-sans-pro.css?h=eef2e813">

<!-- <script src="../../../static/lib/clipboard.min.js?h=64efc85d"></script> -->
<script src="../../../static/lib/jquery-2.2.1.min.js?h=7cb05e3d"></script>
<script src="../../../static/lib/marked.js?h=acaa528b"></script>
<script src="../../../static/lib/MooTools-Core-1.6.0.js?h=f829fe22"></script>
<script src="../../../static/lib/sprintf.js?h=f8d59971"></script>
<script src="../../../static/lib/medium-editor/medium-editor.min.js?h=d2c3e1bb"></script>
<script src="../../../static/lib/me-markdown.standalone.min.js?h=f8bd91a7"></script>
<script src="../../../static/lr-notebook.js?h=9fb07e66"></script>


<title></title>
<body>
  <header>
    <h1><i class="fa fa-sticky-note-o"></i> nb-Gabe_Fischbach</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a  href="../../../">Welcome</a></li>
        
          <li><a  class="active" href="../../../projects/">Projects</a></li>
        
          <li><a  href="../../../calendar/">Calendar</a></li>
        
          <li><a  href="../../../meetings/">Meetings</a></li>
        
          <li><a  href="../../../about/">About</a></li>
        
          <li><a  href="../../../shared/">Shared</a></li>
        
      </ul>
    </nav>
    
  </header>

  <iframe width="0" height="0" border="0" name="frame" style="border-style: none;"></iframe>

  <div class="page">
    
<h2 style="display: inline;"><a class="orange" href="../../../projects/HSV/">HSV/</a></h2><br>
<form target="frame" action="/admin/api/browsefs" method="post">
  <input type="hidden" name="path" value="/projects/HSV/2017-05-31">
  <input type="image" src=../../../static/images/link.png>
</form>
<h2 class="lightblue" style="display: inline;">Orthomcl Inflation Data</h2> <span style="float:right;" class="midgray">2017-05-31</span> 
<hr>


<h5 style="float:left;">Attachments:</h5>


<div class="row">
  <div class="one column"></div>
  <div class="two columns"><!-- Attachments: --></div>
<div class="nine columns">
    
    
    
        <a class="green" href="../../../projects/HSV/2017-05-31/00_clean_mysql_orthomcl.sh">00_clean_mysql_orthomcl.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/0_install_schema.sh">0_install_schema.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/1_gb_to_fasta.sh">1_gb_to_fasta.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/2_adjust_fasta.sh">2_adjust_fasta.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/3_filter_fasta.sh">3_filter_fasta.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/4_all_vs_all_blast.sh">4_all_vs_all_blast.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/5_parse_blast_results.sh">5_parse_blast_results.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/6_load_orthomcl_db.sh">6_load_orthomcl_db.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/7_run_pairs.sh">7_run_pairs.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/8_run_mcl.sh">8_run_mcl.sh</a>
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/analyze_groups.py">analyze_groups.py</a>
        
  
  
  
  
  
  
  
  
  
  
  
  <i aria-hidden="true" class="icon ion-social-python"></i>
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/fetch_uniprot.py">fetch_uniprot.py</a>
        
  
  
  
  
  
  
  
  
  
  
  
  <i aria-hidden="true" class="icon ion-social-python"></i>
  
  
  
  
 
 
  
  
  
,
    
        <a class="green" href="../../../projects/HSV/2017-05-31/groups_object.py">groups_object.py</a>
        
  
  
  
  
  
  
  
  
  
  
  
  <i aria-hidden="true" class="icon ion-social-python"></i>
  
  
  
  
 
 
  
  
  

    
  </div>
</div>


<hr>





<div id="entry">
    <h2>HSV 05-31-2017</h2>
<p>I've run into a point with the bokeh plots where I really think I'm gonna lose more time at this point than is worth losing. I've implemented the slider and I've generated orthomcl datasets for a range of different inflation values. The problem is getting the rectFig to update every time I move the slider. I've been able to feed the different source data into the slider callback method but when I try to update, it looks for source data that wasn't actually included in the static html? I think that's because when I initialize the actual page, the html document gets written such that the only included source data is the one that is used to initialize the rectangle figure.</p>
<p>I need to think about how to incorporate all the different inflation value source data into the static html that gets initialized, but that's gonna take a little longer. In the meantime, I think the best thing to do is at least summarize the results I've gotten so far in some sort of presentable way for next week. With that in mind, I've written a script, analyze_groups.py that's taking all the group data and churning around with it. I've also copied some of the code I wrote earlier (in fetch_test.py) and put it in a script in the HSV scripts folder called fetch_uniprot.py. I've also written a couple of object definitions in groups_objects.py to make things a little cleaner. As part of putting together all the data, I want to scrape the uniprot data for the relevant proteins.</p>
<h2>Unfound Proteins</h2>
<p>I'm keeping track of which proteins aren't returning any results from uniprot. They all have names like  NP_042969.2, starting with NP. For these, I'm just going to force a record_dict that is empty (or says something like 'unknown').</p>
<h2>Fixing Bug in Uniprot.py</h2>
<p>Incorporating the uniprot data into the groups data is going fine so far, but I've run into a bug in the uniprot code:</p>
<pre><code>File "/Users/student/miniconda3/envs/fischbach/lib/python3.6/site-packages/Bio/SeqIO/UniprotIO.py", line 254, in _parse_comment

    append_to_annotations(ann_key, interact_element.attrib['intactId'])
KeyError: 'intactId'
</code></pre>
<p>I'm going into the source code of Uniprot.py and catching this error. I'm only going to change the code in the fischbach virtual envirinment version (located at /Users/student/miniconda3/envs/fischbach/lib/python3.6/site-packages/Bio/SeqIO/UniprotIO.py).</p>
<p>All I've done is add a conditional in the source code on line 254:</p>
<pre><code># Added by Gabe Reder - 5/31/17
if 'intactId' in interact_element.attrib:
    append_to_annotations(ann_key, interact_element.attrib['intactId'])
</code></pre>
<p>So far it looks like that has taken care of the crash and the code is continuing to run now. Finished and got the resulting data in a pkl file</p>

</div>






<pre style="display:none;" class="markdown"></pre>

<script>
  function renderRightAsMarkdown() {
      var right = document.getElementsByClassName("right");
      for (var i=0; i<right.length; i++) {
          src = right[i].innerHTML
          right[i].innerHTML = marked(src);
      }
  }
  renderRightAsMarkdown();
</script>




<script>

// Disable clipboard stuff for now
// var pre = document.getElementsByTagName('pre');
// for (var i = 0; i < pre.length; i++) {
//   var button = document.createElement('button');
//   button.className = 'btn fa fa-copy';
//   pre[i].appendChild(button);
// }

// var clipboard = new Clipboard('.btn', {
//   target: function(trigger) {return trigger.previousElementSibling;}
// });

// function showSuccess(elem){elem.setAttribute('class','btn fa fa-check');}
// function sleep (time) {return new Promise((resolve) => setTimeout(resolve, time));}
// clipboard.on('success',function(e){
//   showSuccess(e.trigger);
//   sleep(350).then(() => {e.clearSelection();
//     e.trigger.setAttribute('class','btn fa fa-copy');})
// });

// Experimental direct editing

// var paragraphs = $$("#entry>p");
// var lastEl = paragraphs.getLast();
// var path = '/projects/HSV/2017-05-31';

// paragraphs.each(function(el) {
//   var dropArea = new Element('div', {'class':'right droparea',
//                                      'ondrop':'drop(event, path)',
//                                      'ondragover':'dragover_handler(event)'
//                                      });
//   var next = el.getNext();
//   if (!!next && !next.hasClass('right')) {
//     droptext = new Element('div', {'id':'targetString',
//                                    styles:{display: 'none'},
//                                    'html':el.get('html')
//                                   });
//     droptext.inject(dropArea);
//     dropArea.inject(el, 'after');
//   }
// });

// var rightimgs = $$("img.thumb");
// rightimgs.each(function(el) {
//   var button = document.createElement('button');
//   button.className = 'btn fa fa-window-close';
//   el.appendChild(button);
// });

// var markDownEl = document.querySelector(".markdown");

// new MediumEditor($$("#entry>p"), {
//     extensions: {markdown: new MeMarkdown(function (md) {markDownEl.textContent = md;})},
//     toolbar: {
//       allowMultiParagraphSelection: false,
//       buttons: ['bold', 'italic', 'underline']
//     },
//     disableReturn: true,
//     disableDoubleReturn: true,
//     disableExtraSpaces: true,
//     paste: {
//         forcePlainText: true,
//         cleanPastedHTML: true
//     }
// });

</script>

<a href="slides" id="play-slides-link"><i class="fa fa-play" aria-hidden="true"></i></a>


  </div>

  <footer>
    &copy; 2016. Made with <a target="_new" href="http://bionano.ucsf.edu/"><i class="fa fa-hand-lizard-o"></i></a> in SF.
  </footer>

</body>
